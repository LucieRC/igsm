#!/bin/bash
# MITgcm configuration options for use with IGSM

FC="mpif77"
CC="mpicc"
#DEFINES='-DALLOW_USE_MPI -DALWAYS_USE_MPI -DWORDLENGTH=4'
DEFINES="-DWORDLENGTH=4"
CPP="cpp -traditional -P"
LINK="mpif90"

if test "x$IEEE" = x ; then
  # no need for IEEE-754
  FFLAGS='-byteswapio -r8 -Mnodclchk -Mextend'
  #FOPTIM='-tp p6 -v -O2 -Munroll -Mvect=cachesize:512000,transform'
  FOPTIM='-tp nehalem-64 -fastsse -Mvect=cachesize:524288,transform'
#  FOPTIM='-O2 -Munroll=c:1 -Mnoframe -Mlre -Mautoinline '
#  FOPTIM='' # -tp k8-64'
else
  # try to follow IEEE-754
  FFLAGS='-byteswapio -r8 -Mnodclchk -Mextend'
#  FOPTIM='-tp p6 -v -O2 -Munroll -Mvect=cachesize:512000,transform -Kieee'
  FOPTIM='-O0 -Mvect=sse -Mscalarsse -Mcache_align -Mnoflushz -Kieee'
fi

INCLUDEDIRS="@top_builddir@ @top_srcdir@/src/inc @INC_MPI@ @INC_NETCDF@"
INCLUDES="-I@top_builddir@ -I@top_srcdir@/src/inc -I@INC_MPI@ -I@INC_NETCDF@"
LIBS=" -L@LIB_MPI@ -L@LIB_NETCDF@"
