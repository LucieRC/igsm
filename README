The Massachusetts Institute of Technology Integrated Global System Model
========================================================================

This file contains some information on building the IGSM from source. For more
on the contents of the source tree, see the commit history at using 'git log',
or at http://svante.mit.edu/git/?p=igsm.git.

CONTENTS
--------

data/ -- Common data files (grids, etc.) for running the model
     clm/ -- Data for the Community Land Model (CLM) [1]
     data/ -- Data for the atmospheric chemistry module (chem)
     emimed/ -- Predicted emissions data
     init/ -- General initialization data
          46lat/ -- Data specific to a 46-latitude-band grid
          forcing/ -- Forcing data
     tem/ -- Data for the Terrestrial Ecosystem Model (TEM)

src/ -- Source code for the modules of the model, includingâ€¦
    atm/ -- atmosphere model
    chem/ -- atmospheric chemistry model
    clm/ -- CLM
    inc/ -- INClude files common to all modules
    meta/ -- urban METAmodel
    ocn_ml/ -- two-dimensional, Multi-Layer (ML) OCeaN model
    ocm/ -- Ocean Carbon Model
    tem/ -- TEM

util/ -- Utilities
     analysis/ -- Extract data from output files
     eppa/ -- Preprocessor for EPPA 5 emissions

tests/ -- Example input files for common use cases
      run_fullchem/ -- 1990-2100 predicted-emissions case, full model, 2D ocean

DEPENDENCIES
------------
The following third-party packages are included in the code:

 clm/utils/esmf -- Earth System Modelling Framework (ESMF) [2]

BUILD
-----
The following process has only been tested on svante.mit.edu -- a Fedora Core
14 x86_64 system with GNU Make 3.82 [3], PGI 9.0.4 and NetCDF 3.6.2.

(0) If building directly from version control, in the root directory type:

    $ autoreconf --install

 1. Load the PGI [4] compilers and the NetCDF [5] libraries:

    $ module load pgi netcdf

 2. Create or edit the file src/inc/ctrparam.h. An example is provided at
    src/inc/ctrparam_igsm22_noclm.h.

 3. In the root directory, type:

    $ mkdir build
    $ cd build
    $ ../configure
    $ make

An executable named 'igsm22' is produced in the src/ directory. Some basic
documentation of options can be obtained by typing './configure --help', but
the build process is still mostly undocumented.

EXECUTE
-------

N.B. Before running any of the experiments in the tests/ directory, copy the
entire directory out of the source tree into a separate location. This avoids
confusion when the experiments alter the files or create new ones, or updates
to the source also change the experiment input files.

### Preprocessing
The `emiprep` binary reads a file called `eppa5chm.put` from the current
directory and generates several files that are read by the IGSM. `eppa5chm.put`
can be obtained by copying the `chm.put` file produced by EPPA.

Only the EPPA 5 preprocessor is currently included. It is uncertain whether this
preprocessor also works for EPPA 4 output.

### Running

(To be added)

REFERENCES
----------
1. http://www.cgd.ucar.edu/tss/clm
2. http://www.earthsystemmodeling.org/
3. http://www.gnu.org/software/make/
4. http://www.pgroup.com/
5. http://www.unidata.ucar.edu/software/netcdf/
